<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Offender Reports</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content *ngIf="initialDataLoaded">
  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content
      pullingText="Pull to refresh"
      refreshingText="Refreshing...">
    </ion-refresher-content>
  </ion-refresher>
  
  <ion-card>
    <div class="offender-topper"></div>
    <ion-card-header>
      <ion-card-title>Offenders</ion-card-title>
    </ion-card-header>
  
    <ion-card-content>
      Offenders are those who have committed violations of UEE law directed at BendroCorp and its employees. Offenders are permanently barred from direct association with BendroCorp and should be treated with caution.
    </ion-card-content>
  </ion-card>

  <ion-card>
    <ion-item (click)="openReportList(unAnsweredReports, 'unanswered')" *ngIf="isAdmin" detail>Unapproved Reports (Admin) &nbsp;<ion-badge color="danger">{{unAnsweredReports.length}}</ion-badge></ion-item>
    <ion-item (click)="openReportList(adminReports, 'admin')" *ngIf="isAdmin" detail>All Reports (Admin)&nbsp;<ion-badge color="primary">{{adminReports.length}}</ion-badge></ion-item>
    <ion-item (click)="openReportList(myReports, 'mine')" detail>My Reports&nbsp;<ion-badge color="primary">{{myReports.length}}</ion-badge></ion-item>
  </ion-card>

  <ion-list>
    <ion-list-header>
      <ion-label>Offenders</ion-label>
    </ion-list-header>
    <ion-item detail *ngFor="let offender of offenders" (click)="openOffenderDetails(offender)">
      <ion-avatar slot="start">
        <img src="{{offender.offender_rsi_avatar}}" alt="">
      </ion-avatar>
      <ion-label>{{offender.offender_handle}}<p>{{offender.offender_rating.title}}</p></ion-label>
    </ion-item>
  </ion-list>

  <ion-fab vertical="bottom" horizontal="end" slot="fixed">
    <ion-fab-button (click)="addOffenderReport()">
      <ion-icon name="add"></ion-icon>
    </ion-fab-button>
  </ion-fab>
</ion-content>
